## Customize the test machine
machine:

  python:
    #version: pypy-2.2.1

  # Add some environment variables
  environment:
    #PYTHONPATH=~/vtk-precise64/lib/python2.7/site-packages:~/vtk-precise64/lib LD_LIBRARY_PATH=~/vtk-precise64/lib:~/local/lib:~/local/lib/R/lib

## Customize dependencies
dependencies:
  cache_directories:
    #- redis-2.4.18   # relative to the build directory

  pre:
    #- sudo apt-get update
    #- sudo apt-get install -y g++ git make xorg

    #- if [[ ! -e redis-2.4.18/src/redis-server ]]; then wget http://redis.googlecode.com/files/redis-2.4.18.tar.gz && tar xzf redis-2.4.18.tar.gz && cd redis-2.4.18 && make; fi

    - wget https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh;
    - bash miniconda.sh -b -p $HOME/miniconda
    - export PATH="$HOME/miniconda/bin:$PATH"
    #- hash -r
    - conda config --set always_yes yes --set changeps1 no
    - conda update -q conda
    #- conda info -a
    - conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION atlas numpy scipy networkx matplotlib nose pandas vtk
    #- source activate test-environment
    - "pip install nibabel"

    # Coverage packages:
    - "pip install python-coveralls coverage nose-cov"
    - "pip install profilehooks"

    # Install:
    - python setup.py install

#
### Test script:
#script:
###  - python -c "import vtk"
#  - nosetests --with-coverage --with-doctest mindboggle/evaluate/
##  - nosetests --with-coverage --with-doctest mindboggle/features/
#  - nosetests --with-coverage --with-doctest mindboggle/guts/
#  - nosetests --with-coverage --with-doctest mindboggle/mio/
#  - nosetests --with-coverage --with-doctest mindboggle/shapes/
#  - nosetests --with-coverage --with-doctest mindboggle/thirdparty/
##  - nosetests --with-coverage --with-doctest mindboggle/thirdparty/ants.py
#
### Calculate coverage:
##after_success:
##  - coveralls --config_file .coveragerc
