---
title: "README"
output: github_document
---

Functions to analyze data from GENEActiv wearables

```{r setup, include=FALSE}
# our GENEActive data
setwd("/Volumes/Data/Research/ITL/GENEActiv/Data/")
# exclude the partial data CSVs; include only full-data binaries
g_files <- list.files()[endsWith(list.files(), '.bin')]
# subset the recordings captured 2017 Feb 20-22,
# offloaded Feb 22 & Feb 24
g_files <- g_files[grepl('02-22', g_files) | grepl('02-24', g_files)]

# GENEActiv analysis libraries
require(GENEAread)
require(GGIR)

# dependencies
require(mmap)

# GENEAread function `read.bin` returns an AccData object
# AccData factors for the device we are testing are:
#   timestamp
#   x
#   y
#   z
#   light
#   button
#   temperature
arno_foot_l <- read.bin(g_files[1])
arno_foot_r <- read.bin(g_files[2])
arno_hand <- read.bin(g_files[3])
curt_hand <- read.bin(g_files[4])
jon_hand <- read.bin(g_files[5])

AccDatas <- c('arno_foot_l', 'arno_foot_r', 'arno_hand', 'curt_hand', 'jon_hand')
processing_times <- c(2.219 * 60, 3.077 * 60, 3.916, 12.753 * 60, 3.57)
pt2 <- c(39.367, 25.765, 3.652, 9.103*60, 3.991)
record_frames <- c(14803200, 10368000, 2009100, 33276000, 1728000)
record_RAM <- c(829, 581, 113, 1863, 97)
fq <- c(85.7, 60, 20, 100, 10)
dur <- c(48, 48, 168, 168, 48)
meta <- data.frame(g_files, AccDatas, fq, dur, processing_times, pt2, record_frames, record_RAM)
remove(AccDatas, processing_times, pt2, record_frames, record_RAM, fq, dur)
```

arno_foot_l : 85.7 Hz : 48 hrs :
Processing took: 2.219 mins .
Loaded 14803200 records (Approx  829 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-22 16:58:24.488 (Wed) 
Processing took: 39.367 secs .
Loaded 14803200 records (Approx  829 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-22 16:58:24.488 (Wed) 

arno_foot_r : 60.0 Hz : 48 hrs:
Processing took: 3.077 mins .
Loaded 10368000 records (Approx  581 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-22 17:00:00.483 (Wed) 
Processing took: 25.765 secs .
Loaded 10368000 records (Approx  581 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-22 17:00:00.483 (Wed) 

arno_hand : 30.0 Hz : 168 hrs:
Processing took: 3.916 secs .
Loaded 2009100 records (Approx  113 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-21 12:31:58.964 (Tue) 
Processing took: 3.652 secs .
Loaded 2009100 records (Approx  113 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-21 12:31:58.964 (Tue)

curt_hand : 100.0 Hz : 168 hrs:
Processing took: 12.753 mins .
Loaded 33276000 records (Approx  1863 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-24 13:26:00.490 (Fri)
Processing took: 9.103 mins .
Loaded 33276000 records (Approx  1863 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-24 13:26:00.490 (Fri) 

jon_hand : 10.0 Hz : 48 hrs:
Processing took: 3.57 secs .
Loaded 1728000 records (Approx  97 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-22 17:00:00.400 (Wed) 
Processing took: 3.991 secs .
Loaded 1728000 records (Approx  97 MB of RAM)
17-02-20 17:00:00.500 (Mon)  to  17-02-22 17:00:00.400 (Wed) 

```{r}
plot(meta$record_frames, meta$processing_times, xlab = "number of frames captured", ylab = "processing time", main="Processing Time by number of frames captured, 2 trials")
abline(lm(meta$processing_times ~ meta$record_frames))
points(meta$record_frames, meta$pt2, pch = 2, col="#0067a0")
abline(lm(meta$pt2 ~ meta$record_frames), col="#0067a0")
```
